services:
  ten_agent_dev:
    image: ghcr.io/ten-framework/ten_agent_build:0.7.9
    container_name: ten_agent_dev
    platform: linux/amd64

    # 这两行保证容器里可以有交互终端
    tty: true
    stdin_open: true

    # ⚠️ 不要在这里自动跑 task run！
    # 只让容器启动一个 bash 挂着，保持长期存活
    command: bash

    # 比 always 稍微安全一点，手动停才停
    restart: unless-stopped

    ports:
      # TEN 管理 API
      - "9500:8397"

      # TMAN Designer 后端端口
      - "9501:49483"

      # Web UI（Next 前端）
      - "3000:3000"

    volumes:
      - ./:/app
      - ../.vscode/:/app/.vscode
      - ../tools/pylint/.pylintrc:/tools/pylint/.pylintrc
      - ../tools/upgrade:/tools/upgrade

    working_dir: /app
    env_file:
      - .env

    networks:
      - ten_agent_network

networks:
  ten_agent_network:
    driver: bridge
